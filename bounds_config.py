"""
DH参数边界配置文件
用于配置各连杆参数的优化边界范围
"""

# 定义参数搜索范围配置
PARAM_RANGES = {
    # 连杆索引: [theta_range, d_range, alpha_range, a_range]
    # 参数说明：
    # - 参数范围为0.0表示该参数将被固定为初始值，不参与优化
    # - 参数范围>0表示优化范围为[初始值-范围, 初始值+范围]
    # - 任何小于等于浮点精度(1e-10)的范围都被视为0
    #
    # 注意: 如果一个参数固定(范围=0)，它将在整个优化过程中保持初始值不变
    
    1: [0.0, 0.0, 0.0, 0.0],    # 基座旋转 - 全部参数固定
    2: [1.5, 2.0, 0.0, 2.0],    # 肩部关节 - 固定alpha，优化其他
    3: [1.5, 2.0, 0.0, 2.0],    # 上臂 - 固定alpha，优化其他
    4: [1.5, 2.0, 0.0, 2.0],    # 肘部关节 - 固定alpha，优化其他
    5: [1.5, 1.5, 0.0, 1.5],    # 腕部关节 - 固定alpha，优化其他
    6: [0.0, 0.0, 0.0, 0.0],    # 末端关节 - 全部参数固定
}

# 不同配置示例：
# - [0.0, 0.0, 0.0, 0.0] 全部参数固定（不参与优化）
# - [1.0, 1.0, 0.0, 1.0] 固定alpha参数，优化其他参数
# - [1.0, 0.0, 0.0, 1.0] 只优化theta和a参数，固定d和alpha
# - [0.0, 0.0, 0.0, 1.0] 只优化a参数，固定其他所有参数

# 边界缩放参数
INITIAL_SCALE = 1.0       # 初始边界缩放因子
MIN_SCALE = 0.2           # 最小边界缩放因子(增大以避免边界过窄)
ADJUSTMENT_RATE = 0.85    # 调整速率(减缓边界收缩速度)

# 差分进化算法配置
DE_CONFIG = {
    'with_quaternions': {   # 包含四元数数据时DE优化器参数
        'popsize': 50,      # 种群大小
        'maxiter': 150,     # 最大迭代次数
        'F': 0.65,          # 变异因子
        'CR': 0.8,          # 交叉概率
    },
    'position_only': {      # 仅包含位置数据时DE优化器参数
        'popsize': 40,      # 种群大小
        'maxiter': 120,     # 最大迭代次数
        'F': 0.6,           # 变异因子
        'CR': 0.8,          # 交叉概率
    }
}

# 边界调整间隔
BOUNDARY_ADJUSTMENT_INTERVALS = 25  # 每隔多少代调整一次边界
